(()=>{"use strict";!function(){const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),l=document.createElement("h2"),o=document.createElement("p"),c=document.createElement("div"),s=document.createElement("button"),a=document.createElement("button");e.className="popup",t.className="popup-bg",n.className="popup-body",l.className="popup__title",o.className="popup__time",c.className="popup__btn-box",a.className="popup__btn",s.className="popup__btn result",l.innerText="Congratulation!",s.innerText="Show result",a.innerText="Play again",c.append(a,s),n.append(l,o,c),e.append(t,n),document.body.append(e)}(),function(){const e=document.createElement("h1");e.className="title",e.innerText="Nonograms";const t=document.createElement("table");t.className="nonogram-grid";const n=document.createElement("p");n.className="timer",n.innerText="00:00",document.body.append(e),document.body.append(t),document.body.append(n);const l=document.createElement("thead"),o=document.createElement("tbody");l.className="topKey",t.append(l),t.append(o);for(let e=0;e<5;e++){const t=document.createElement("tr");for(let e=0;e<6;e++){const e=document.createElement("td"),n=document.createElement("div");e.className="cell",n.className="fill",t.append(e),e.append(n)}o.append(t),document.querySelectorAll("tr")[e].childNodes[0].classList.add("hint","left");const n=document.querySelectorAll("td"),l=document.getElementsByClassName("fill");for(let e=0;e<n.length;e++)n[e].classList.contains("hint")?n[e].classList.remove("cell"):l[e].classList.add("puzzle")}for(let e=0;e<6;e++){const t=document.createElement("th"),n=document.createElement("div");n.className="fill",t.append(n),l.append(t),0!==e&&t.classList.add("hint","top")}!function(){const e=document.querySelectorAll("tr");for(let t=0;t<e.length;t++){const n=e[t].childNodes;for(let e=1;e<n.length;e++)n[e].setAttribute("data-row",`${t}`),n[e].setAttribute("data-column",""+(e-1))}}()}(),document.querySelector(".result").addEventListener("click",(function(){const e=document.querySelector(".popup");e.style.opacity="0",setTimeout((()=>{e.style.display="none"}),1e3);const t=document.querySelector(".timer");t.innerText="Hide the result",t.classList.add("timer__isShownBtn"),t.addEventListener("click",(function t(){e.style.display="flex",setTimeout((()=>{e.style.opacity="1"}),0),removeEventListener("click",t)}))}));const e=[{solution:[[0,1,0,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]]},{solution:[[0,0,0,0,0],[0,1,0,1,0],[0,0,0,0,0],[1,0,0,0,1],[0,1,1,1,0]]},{solution:[[1,1,0,1,0],[0,1,1,0,1],[1,1,0,0,0],[1,0,1,0,0],[1,1,1,0,0]]},{solution:[[0,0,1,1,1],[0,1,1,1,1],[0,0,0,0,1],[1,0,1,0,1],[1,0,1,0,0]]},{solution:[[0,1,1,1,0],[0,1,0,0,0],[0,1,1,1,0],[0,0,0,1,0],[0,1,1,1,0]]}];function t(e){let t=e.target;"DIV"!==t.tagName||t.classList.contains("flipped")||(t.classList.toggle("fill"),t.classList.toggle("filled"),t.style.backgroundImage="none")}function n(e){e.preventDefault();let t=e.target;"DIV"!==t.tagName||t.classList.contains("filled")||t.classList.toggle("flipped")}let l,o,c,s=0;function a(){l=e[Math.floor(Math.random()*e.length)].solution,o=JSON.parse(JSON.stringify(l)),localStorage.setItem("0",l.toString()),u(),d(l),r(m(o)),y(),g(),a=()=>{l=e[Math.floor(Math.random()*e.length)].solution,o=JSON.parse(JSON.stringify(l)),localStorage.setItem("0",l.toString()),y()}}function i(){!function(){const e=document.querySelectorAll(".puzzle"),t=document.getElementsByClassName("cell");for(let n=0;n<e.length;n++)e[n].classList.remove("hide","complete","filled","flipped"),e[n].classList.add("fill"),t[n].classList.remove("preview");const n=document.querySelectorAll(".hint"),l=document.querySelectorAll("span");for(let e=0;e<n.length;e++)n[e].classList.remove("hidden");for(let e=0;e<l.length;e++)l[e].remove();const o=document.querySelector(".popup");o.style.opacity="0",setTimeout((()=>{o.style.display="none"}),1e3),document.querySelector(".timer").innerText="00:00"}(),u(),a(),d(l),r(m(o))}function r(e){p(document.getElementsByClassName("top"),e)}function d(e){p(document.getElementsByClassName("left"),e)}function u(){const e=document.querySelector("table");e.addEventListener("click",t),e.addEventListener("contextmenu",n)}const m=function(e){const t=e;for(let n=0;n<e.length;n+=1)for(let l=n;l<e.length;l+=1){const e=t[n][l];t[n][l]=t[l][n],t[l][n]=e}for(let n=0;n<e.length;n+=1)for(let l=0;l<Math.floor(e.length/2);l+=1){const o=t[n][l];t[n][l]=t[n][e.length-l-1],t[n][e.length-l-1]=o}return t};function p(e,t){for(let n=0;n<e.length;n++){const l=e[n].firstChild;let o="";for(let e=0;e<t[n].length;e++)if(1===t[n][e]&&1===t[n][e+1]||1===t[n][e]&&1===t[n][e-1]){if(o=(+o+1).toString(),0===t[n][e+1]||void 0===t[n][e+1]){const e=document.createElement("span");e.innerText=o,l.append(e),o=""}}else if(1===t[n][e]){o="1";const e=document.createElement("span");e.innerText=o,l.append(e),o=""}}}let f=[];const g=function(){f=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],addEventListener("click",(function(e){let t=e.target;if(!t.classList.contains("puzzle"))return;const n=t.parentNode.getAttribute("data-row"),l=t.parentNode.getAttribute("data-column");t.classList.contains("filled")?f[n][l]=1:f[n][l]=0,localStorage.getItem("0")===f.toString()&&(!function(e){const t=document.querySelector(".popup"),n=document.querySelector(".popup__time");t.style.display="flex",n.innerText="Your time is "+e+"s",setTimeout((()=>{t.style.opacity="1"}),0)}(s),function(){const e=document.querySelectorAll(".puzzle"),t=document.querySelectorAll(".cell"),n=document.querySelectorAll(".hint");for(let e=0;e<n.length;e++)n[e].classList.add("hidden");for(let n=0;n<e.length;n++)t[n].classList.add("preview"),e[n].classList.contains("filled")?e[n].classList.add("complete"):e[n].classList.add("hide")}(),document.querySelector(".popup__btn").addEventListener("click",i),localStorage.clear(),f=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],s=0,clearInterval(c))}))};function y(){const e=document.querySelector(".timer");0===s&&(c=0,addEventListener("click",(function t(n){n.target.classList.contains("puzzle")&&(c=setInterval((()=>{s++,e.innerText=function(e){let t=Math.floor(e/60),n=e-60*t;return n<10&&(n="0"+n),t<10&&(t="0"+t),`${t}:${n}`}(s)}),1e3),removeEventListener("click",t))})))}setInterval((()=>{console.log(s)}),1e3),a()})();